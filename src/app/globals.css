@import "tailwindcss";
@plugin "@tailwindcss/typography";

:root {
  --primary-sidebar-width: 212px;
  --secondary-sidebar-width: 350px;
  /*
    90s Windows-style cursors (SVG data URIs)
    Note: Cursor support varies by browser; each has a sensible fallback.
  */
  --cursor-90s-default: url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3E%3Cpath%20d='M3%203%20L3%2027%20L9%2021%20L13%2031%20L17%2029%20L13%2019%20L21%2019%20Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-linejoin='miter'/%3E%3C/svg%3E")
    3 3;
  --cursor-90s-pointer: url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3E%3Cpath%20d='M12%204%20c-1.1%200-2%200.9-2%202v12.2l-1.6-1.6c-1.2-1.2-3.1-1.2-4.3%200s-1.2%203.1%200%204.3l7.2%207.2c1.1%201.1%202.6%201.7%204.1%201.7h5.6c2.7%200%205.1-1.8%205.8-4.4l2.1-8.3c0.3-1.3-0.5-2.6-1.8-2.9c-1.3-0.3-2.6%200.5-2.9%201.8L22%2020V6c0-1.1-0.9-2-2-2s-2%200.9-2%202v8V6c0-1.1-0.9-2-2-2s-2%200.9-2%202v9V7c0-1.7-1.3-3-3-3Z'%20fill='white'%20stroke='black'%20stroke-width='2'%20stroke-linejoin='round'%20stroke-linecap='round'/%3E%3C/svg%3E")
    6 2;
  /*
    Cursor theming (used by src/components/ThemedCursor.tsx)
    Keep this "red 90s cursor" color stable even if the site's accent changes.
  */
  --cursor-crimson: #6a0620;
  /* Editorial palette (Bum Diaryâ€“inspired) */
  --color-neutral-900: #111111;
  --color-neutral-700: #404040;
  --color-neutral-500: #737373;
  --color-neutral-400: #a3a3a3;

  --text-color-primary: var(--color-neutral-900);
  --text-color-secondary: var(--color-neutral-700);
  --text-color-tertiary: var(--color-neutral-500);
  --text-color-quaternary: var(--color-neutral-400);

  /* Section accent colors */
  --accent-crimson: #6a0620;
  /* Use one accent color everywhere (deep crimson) */
  --accent-latest: var(--accent-crimson);
  --accent-stories: var(--accent-crimson);
  --accent-columns: var(--accent-crimson);
  --accent-about: var(--accent-crimson);
  --accent-resume: var(--accent-crimson);

  --background-color-main: #ffffff;
  --background-color-primary: #ffffff;
  --background-color-secondary: #fafafa;
  --background-color-tertiary: #f5f5f5;
  --background-color-quaternary: #f0f0f0;
  --background-color-elevated: #ffffff;

  --scrollbar-color: #c7c7c7;
  --text-color-campsite: #111111;

  --border-color-primary: rgba(0, 0, 0, 0.12);
  --border-color-secondary: rgba(0, 0, 0, 0.08);
  --focus-ring-color: rgba(106, 6, 32, 0.35);

  @variant dark {
    --text-color-primary: #f5f5f5;
    --text-color-secondary: #d4d4d4;
    --text-color-tertiary: #a3a3a3;
    --text-color-quaternary: #737373;

    /* Still deep crimson, but readable on black */
    --accent-crimson: #6a0620;
    --cursor-crimson: #6a0620;
    --accent-latest: var(--accent-crimson);
    --accent-stories: var(--accent-crimson);
    --accent-columns: var(--accent-crimson);
    --accent-about: var(--accent-crimson);
    --accent-resume: var(--accent-crimson);

    --background-color-main: #0a0a0a;
    --background-color-primary: #0a0a0a;
    --background-color-secondary: #111111;
    --background-color-tertiary: #171717;
    --background-color-quaternary: #262626;
    --background-color-elevated: #111111;
    --border-color-primary: rgba(255, 255, 255, 0.12);
    --border-color-secondary: rgba(255, 255, 255, 0.08);
    --scrollbar-color: rgba(255, 255, 255, 0.24);
    --focus-ring-color: rgba(106, 6, 32, 0.6);
  }
}

@theme inline {
  --color-neutral-750: oklch(20% 0 0);
  --color-neutral-850: oklch(23% 0 0);

  --text-color-primary: var(--text-color-primary);
  --text-color-secondary: var(--text-color-secondary);
  --text-color-tertiary: var(--text-color-tertiary);
  --text-color-quaternary: var(--text-color-quaternary);

  --text-color-campsite: var(--text-color-campsite);

  --font-family-serif:
    var(--font-serif), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;

  --background-color-main: var(--background-color-main);
  --background-color-primary: var(--background-color-primary);
  --background-color-secondary: var(--background-color-secondary);
  --background-color-tertiary: var(--background-color-tertiary);
  --background-color-quaternary: var(--background-color-quaternary);
  --background-color-elevated: var(--background-color-elevated);

  --border-color-primary: var(--border-color-primary);
  --border-color-secondary: var(--border-color-secondary);
}

@layer base {
  html,
  body {
    cursor: var(--cursor-90s-default), default;
  }

  * {
    -webkit-tap-highlight-color: transparent;
    /*
      Temporarily fix a bug in Chrome
      Ref https://twitter.com/Eramdam/status/1750934375200661609
    */
    font-synthesis-weight: none;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-color) transparent;
    font-family: var(--font-sans), sans-serif;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-family-serif);
  }

  /* Typewriter-esque heading reveal (global) */
  h1:not(.no-typewriter),
  h2:not(.no-typewriter),
  h3:not(.no-typewriter) {
    will-change: clip-path;
    clip-path: inset(0 100% 0 0);
    animation: typewriter-reveal var(--tw-typewriter-duration, 2400ms)
      steps(var(--tw-typewriter-steps, 28), end) both;
  }

  @media (prefers-reduced-motion: reduce) {
    h1:not(.no-typewriter),
    h2:not(.no-typewriter),
    h3:not(.no-typewriter) {
      animation: none;
      clip-path: none;
    }
  }

  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--border-color-primary, currentColor);
  }

  a,
  button,
  [role="button"],
  summary {
    cursor: var(--cursor-90s-pointer), pointer;
    transition-property:
      color, background-color, border-color, text-decoration-color, fill, stroke, opacity,
      transform, box-shadow;
    transition-duration: 150ms;
    transition-timing-function: cubic-bezier(0.2, 0, 0, 1);
  }

  @media (prefers-reduced-motion: reduce) {
    a,
    button,
    [role="button"],
    summary {
      transition: none;
    }
  }

  :where([data-magnetic="true"], a:not([data-no-magnetic])) {
    --magnetic-x: 0px;
    --magnetic-y: 0px;
    transform: translate3d(var(--magnetic-x), var(--magnetic-y), 0);
    will-change: transform, filter;
    transition-property: transform, filter;
    transition-duration: 90ms;
    transition-timing-function: cubic-bezier(0.2, 0, 0, 1);
  }

  [data-magnetic="true"]:hover {
    filter: drop-shadow(0 10px 22px rgba(0, 0, 0, 0.12));
  }

  .dark [data-magnetic="true"]:hover {
    filter: drop-shadow(0 14px 28px rgba(0, 0, 0, 0.5));
  }

  a:not([data-no-magnetic]):hover {
    text-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
  }

  .dark a:not([data-no-magnetic]):hover {
    text-shadow: 0 8px 18px rgba(0, 0, 0, 0.55);
  }

  @media (prefers-reduced-motion: reduce) {
    :where([data-magnetic="true"], a:not([data-no-magnetic])) {
      transform: none;
      filter: none;
      text-shadow: none;
      transition: none;
    }
  }

  a:focus-visible,
  button:focus-visible,
  [role="button"]:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  summary:focus-visible {
    outline: 2px solid var(--focus-ring-color);
    outline-offset: 3px;
    border-radius: 10px;
  }

  /* Prevent strong tags in headings from adding extra font weight */
  h1 strong,
  h2 strong,
  h3 strong,
  h4 strong,
  h5 strong,
  h6 strong {
    font-weight: inherit;
  }

  ::selection {
    background-color: rgba(0, 154, 250, 0.1);
    color: #0066db;
  }

  .dark ::selection {
    background-color: rgba(240, 104, 0, 0.1);
    color: #ff6b01;
  }

  .scrollbar-hidden {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .scrollbar-hidden::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-gutter-stable {
    scrollbar-gutter: "stable";
  }
}

.prose {
  --tw-prose-body: var(--text-color-secondary);
  --tw-prose-headings: var(--text-color-secondary);
  --tw-prose-lead: var(--text-color-secondary);
  --tw-prose-links: var(--text-color-secondary);
  --tw-prose-bold: var(--text-color-secondary);
  --tw-prose-counters: var(--text-color-secondary);
  --tw-prose-bullets: var(--text-color-secondary);
  --tw-prose-hr: var(--text-color-secondary);
  --tw-prose-quotes: var(--text-color-secondary);
  --tw-prose-quote-borders: var(--text-color-secondary);
  --tw-prose-captions: var(--text-color-secondary);
  --tw-prose-kbd: var(--text-color-secondary);
  --tw-prose-kbd-shadows: NaN NaN NaN;
  --tw-prose-code: var(--text-color-secondary);
  --tw-prose-pre-code: var(--text-color-secondary);
  --tw-prose-pre-bg: var(--text-color-secondary);
  --tw-prose-th-borders: var(--text-color-secondary);
  --tw-prose-td-borders: var(--text-color-secondary);
  --tw-prose-invert-body: var(--text-color-secondary);
  --tw-prose-invert-headings: var(--text-color-secondary);
  --tw-prose-invert-lead: var(--text-color-secondary);
  --tw-prose-invert-links: var(--text-color-secondary);
  --tw-prose-invert-bold: var(--text-color-secondary);
  --tw-prose-invert-counters: var(--text-color-secondary);
  --tw-prose-invert-bullets: var(--text-color-secondary);
  --tw-prose-invert-hr: var(--text-color-secondary);
  --tw-prose-invert-quotes: var(--text-color-secondary);
  --tw-prose-invert-quote-borders: var(--border-color-secondary);
  --tw-prose-invert-captions: var(--text-color-secondary);
  --tw-prose-invert-kbd: var(--text-color-secondary);
  --tw-prose-invert-kbd-shadows: 255 255 255;
  --tw-prose-invert-code: var(--text-color-secondary);
  --tw-prose-invert-pre-code: var(--text-color-secondary);
  --tw-prose-invert-pre-bg: var(--text-color-secondary);
  --tw-prose-invert-th-borders: var(--border-color-secondary);
  --tw-prose-invert-td-borders: var(--border-color-secondary);
}

@utility shadow-contrast {
  box-shadow:
    inset 0 0 0 0.5px rgba(255, 255, 255, 0.04),
    inset 0 0.5px 0 0 rgba(255, 255, 255, 0.04),
    0 1px 3px 0px rgba(0, 0, 0, 0.4);
}

@layer utilities {
  /*
    Cursor utilities
    Tailwind's cursor-* utilities (e.g. `cursor-pointer`) override our base
    `a, button { cursor: var(--cursor-pointer) }` rule due to specificity.

    Re-map the common cursor utilities to our themed cursor variables so the
    custom 90s/red cursor is used everywhere consistently.
  */
  .cursor-pointer {
    cursor: var(--cursor-pointer, var(--cursor-90s-pointer)), pointer;
  }

  .cursor-default,
  .cursor-auto {
    cursor: var(--cursor-default, var(--cursor-90s-default)), default;
  }

  .cursor-progress {
    cursor: var(--cursor-progress, progress);
  }

  @keyframes typewriter-reveal {
    from {
      clip-path: inset(0 100% 0 0);
    }
    to {
      clip-path: inset(0 0 0 0);
    }
  }

  /* Typewriter-esque reveal without layout shift */
  .typewriter {
    display: inline-block;
    will-change: clip-path;
    clip-path: inset(0 100% 0 0);
    animation: typewriter-reveal var(--tw-typewriter-duration, 2400ms)
      steps(var(--tw-typewriter-steps, 28), end) both;
  }

  .text-accent-crimson {
    color: var(--accent-crimson);
  }
  .text-accent-latest {
    color: var(--accent-latest);
  }
  .text-accent-stories {
    color: var(--accent-stories);
  }
  .text-accent-columns {
    color: var(--accent-columns);
  }
  .text-accent-about {
    color: var(--accent-about);
  }
  .text-accent-resume {
    color: var(--accent-resume);
  }

  @media (prefers-reduced-motion: reduce) {
    .typewriter {
      animation: none;
      clip-path: none;
    }
  }

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes fade-out {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
  @keyframes zoom-in {
    from {
      transform: scale(0.95);
    }
    to {
      transform: scale(1);
    }
  }
  @keyframes zoom-out {
    from {
      transform: scale(1);
    }
    to {
      transform: scale(0.95);
    }
  }
  @keyframes slide-in-from-top {
    from {
      transform: translateY(-0.5rem);
    }
    to {
      transform: translateY(0);
    }
  }
  @keyframes slide-in-from-bottom {
    from {
      transform: translateY(0.5rem);
    }
    to {
      transform: translateY(0);
    }
  }
  @keyframes slide-in-from-left {
    from {
      transform: translateX(-0.5rem);
    }
    to {
      transform: translateX(0);
    }
  }
  @keyframes slide-in-from-right {
    from {
      transform: translateX(0.5rem);
    }
    to {
      transform: translateX(0);
    }
  }

  .animate-accordion-down {
    animation: accordion-down 0.3s cubic-bezier(0.87, 0, 0.13, 1);
  }
  .animate-accordion-up {
    animation: accordion-up 0.3s cubic-bezier(0.87, 0, 0.13, 1);
  }
  .animate-in {
    animation-fill-mode: both;
  }
  .animate-out {
    animation-fill-mode: both;
  }
  .fade-in-0 {
    animation-name: fade-in;
    animation-duration: 150ms;
  }
  .fade-out-0 {
    animation-name: fade-out;
    animation-duration: 150ms;
  }
  .fade-in-80 {
    animation-name: fade-in;
    animation-duration: 200ms;
  }
  .zoom-in-95 {
    animation-name: zoom-in;
    animation-duration: 150ms;
  }
  .zoom-out-95 {
    animation-name: zoom-out;
    animation-duration: 150ms;
  }
  .slide-in-from-top-2 {
    animation-name: slide-in-from-top;
    animation-duration: 150ms;
  }
  .slide-in-from-bottom-2 {
    animation-name: slide-in-from-bottom;
    animation-duration: 150ms;
  }
  .slide-in-from-left-2 {
    animation-name: slide-in-from-left;
    animation-duration: 150ms;
  }
  .slide-in-from-right-2 {
    animation-name: slide-in-from-right;
    animation-duration: 150ms;
  }

  .prose a {
    color: inherit;
    text-decoration: underline;
    text-decoration-color: var(--text-color-quaternary);
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
    word-break: break-word;
  }

  .prose a:hover {
    color: var(--text-color-primary);
  }

  /* Body text link styling - unified across all rendering pipelines */
  .link-body {
    color: inherit;
    text-decoration: underline;
    text-decoration-color: var(--text-color-quaternary);
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
    word-break: break-word;
  }

  .link-body:hover {
    color: var(--text-color-primary);
  }
  /* Inline code styling */
  .prose code {
    background-color: var(--background-color-tertiary);
    color: var(--text-color-primary);
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-size: 0.925em;
    font-weight: 400;
    font-family:
      ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
      monospace;
    overflow-wrap: anywhere;
  }

  /* Code blocks styling */
  .prose pre {
    background-color: var(--background-color-tertiary);
    border: 0.5px solid var(--border-color-primary);
    border-radius: 0.5rem;
    padding: 1rem;
    overflow-x: auto;
  }

  .prose pre code {
    background-color: transparent;
    color: var(--text-color-primary);
    padding: 0;
    border-radius: 0;
    font-size: 0.925rem;
    line-height: 1.5;
  }

  .prose p {
    overflow-wrap: anywhere;
  }

  /* Comment styling for HN and other external HTML content */
  .comment {
    min-width: 0;
  }

  .comment a {
    color: inherit;
    text-decoration: underline;
    text-decoration-color: var(--text-color-quaternary);
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
    word-break: break-word;
  }

  .comment a:hover {
    color: var(--text-color-primary);
  }

  .comment p {
    overflow-wrap: anywhere;
  }

  /* Inline code styling */
  .comment code {
    background-color: var(--background-color-tertiary);
    color: var(--text-color-primary);
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-size: 0.925em;
    font-weight: 400;
    font-family:
      ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
      monospace;
    overflow-wrap: anywhere;
  }

  /* Code blocks styling */
  .comment pre {
    background-color: var(--background-color-tertiary);
    border: 0.5px solid var(--border-color-primary);
    border-radius: 0.5rem;
    padding: 1rem;
    overflow-x: auto;
    margin: 0.5rem 0;
  }

  .comment pre code {
    background-color: transparent;
    color: var(--text-color-primary);
    padding: 0;
    border-radius: 0;
    font-size: 0.925rem;
    line-height: 1.5;
    white-space: pre-wrap;
    word-break: break-word;
  }
}
